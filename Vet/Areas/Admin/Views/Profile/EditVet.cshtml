@using Entities;
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    Layout = "_Layout";
}
@model VetEntity;
<div class="col-12 grid-margin stretch-card">
    <div class="card">
        <div class="card-body">
            <h4 class="card-title">Редактирование профиля</h4>
           
            <form class="row g-3" action="/Admin/Profile/EditVet" method="post" >
                <input type="hidden" asp-for="Id" />
                <input type="hidden" asp-for="Login" />
                <input type="hidden" asp-for="Password" />
                <input type="hidden" asp-for="RoleType" />
                <div class="col-md-6">
                    <label for="exampleInputCity1" asp-for="Name"></label>
                    <input type="text" class="form-control" id="exampleInputCity1" asp-for="Name" >
                    <span asp-validation-for="Name" class=" mb-3 fw-normal "></span>
                </div>
                <div class="col-md-6">
                    <label for="exampleInputCity1" asp-for="LastName"></label>
                    <input type="text" class="form-control" id="exampleInputCity1"  asp-for="LastName">
                    <span asp-validation-for="LastName" class=" mb-3 fw-normal"></span>
                </div>
                <div class="col-md-6">
                    <label for="exampleInputCity1" asp-for="FatherName"></label>
                    <input type="text" class="form-control" id="exampleInputCity1"  asp-for="FatherName">
                    <span asp-validation-for="FatherName" class=" mb-3 fw-normal"></span>
                </div>
                <div class="col-md-6">
                    <label for="exampleInputCity1" asp-for="Phone"></label>
                    <input type="tel" class="form-control"  asp-for="Phone" id="phone">
                    <span asp-validation-for="Phone" class=" mb-3 fw-normal"></span>
                </div>


                <div class="col-md-12 form-group">
                    <label>Изображение</label>
                    <input type="file" name="img[]" class="file-upload-default" id="image">
                    <img src="@Model.PhotoParth" id="im" style="width:100px;height:100px;margin-left: auto; margin-right: auto;  display: block;" />
                    <div class="input-group col-xs-12">
                        <input type="hidden" id="test" asp-for="PhotoParth" />

                        <input type="text" class="form-control file-upload-info" asp-for="PhotoParth" >
                        
                        <span class="input-group-append">
                            <button class="file-upload-browse btn btn-primary" type="button">Загрузить</button>
                        </span>
                    </div>
                    <span asp-validation-for="PhotoParth" class=" mb-3 fw-normal"></span>
                </div>
                  <div class="col-6">
                    <button type="submit" class="btn btn-primary mr-2">Сохранить</button>
                   
                  </div>
                <div class="col-6">
                    
                    <a href="/Admin/Vet/Index" class="btn btn-light">Отмена</a>
                </div>
            </form>
        </div>
    </div>
</div>
@section Scripts{
    <script>
        $('.file-upload-default').on('change', function () {
            var file = new FormData();
            file.append("File", $(this)[0].files[0]);
            console.log(file);
            $.ajax({
                url: "/Admin/Vet/AddPhoto",
                contentType: false,
                processData: false,
                data: file,
                type: "POST",

                success: function (data) {
                  
                    $("#test").val(data);
                    $("#im").attr("src", data);
                    console.log($("#test").val())
                }

            })
        });
        $(document).ready(function(){
            $('#phone').mask('+7 (000) 00-00-000');
        })
     

    </script>
}
